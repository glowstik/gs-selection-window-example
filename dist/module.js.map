{"mappings":"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","sources":["src/SelectionWindow.js","src/SelectionWindow.module.css"],"sourcesContent":["import React from \"react\";\nimport useSize from \"@react-hook/size\";\nimport styles from './SelectionWindow.module.css'\n\nexport function SelectionWindow({ children, className = undefined, mouseThreshold = 30, touchThreshold = 60 }) {\n  console.log('v1')\n  const [node, setNode] = React.useState(null);\n  const selectionRef = React.useRef(null);\n  const frameRef = React.useRef(null);\n  const cropZoneRef = React.useRef(null);\n  const stateRef = React.useRef({ \n    dragging: false,\n    pointers: new Map(),\n    edges: []\n  })\n  const [containerWidth, containerHeight] = useSize(node);\n\n  if (containerWidth && containerHeight && cropZoneRef.current === null) {\n    cropZoneRef.current = {\n      left: containerWidth * 0.25,\n      top: containerHeight * 0.25,\n      right: containerWidth * 0.75,\n      bottom: containerHeight * 0.75,\n      containerWidth,\n      containerHeight\n    };\n  }\n\n  React.useEffect(\n    () => {\n      if (!node) return\n      node.addEventListener('touchmove', handleTouchMove)\n      node.addEventListener('pointerdown', handleDragStart)\n      node.addEventListener('pointermove', handleDrag, { passive: true })\n      node.addEventListener('pointerup', handleDragEnd)\n      node.addEventListener('pointercancel', handleDragEnd)\n\n      return () => {\n        node.removeEventListener('touchmove', handleTouchMove)\n        node.removeEventListener('pointerdown', handleDragStart)\n        node.removeEventListener('pointermove', handleDrag, { passive: true })\n        node.removeEventListener('pointerup', handleDragEnd)\n        node.removeEventListener('pointercancel', handleDragEnd)\n      }\n    },\n    [node]\n  )\n\n  return (\n    <div ref={setNode} className={cx(className, styles.component)}>\n      <div\n        ref={selectionRef}\n        className={styles.selection}\n        style={{\n          position: \"absolute\",\n          left: px(cropZoneRef.current?.left ?? 0),\n          top: px(cropZoneRef.current?.top ?? 0),\n          width: px((cropZoneRef.current?.right ?? 0) - (cropZoneRef.current?.left ?? 0)),\n          height: px((cropZoneRef.current?.bottom ?? 0) - (cropZoneRef.current?.top ?? 0)),\n        }}\n        {...{ children }}\n      />\n    </div>\n  );\n\n  function handleDragStart(e) {\n    e.preventDefault();\n\n    const { offsetX: x, clientY: y } = e\n    const threshold = e.pointerType === 'mouse' ? mouseThreshold : touchThreshold\n    const pointerState = getPointerState({ x, y, threshold })\n    \n    stateRef.current.dragging = true\n    stateRef.current.pointers.set(e.pointerId, pointerState)\n    stateRef.current.edges = stateRef.current.edges.concat(pointerState.edges)\n  }\n\n  function handleTouchMove(e) {\n    if (!stateRef.current.dragging) return\n    e.preventDefault()\n  }\n\n  function handleDrag(e) {\n    if (!stateRef.current.dragging) return\n    \n    const pointerState = stateRef.current.pointers.get(e.pointerId)\n    const x = e.offsetX - pointerState.dx\n    const y = e.offsetY - pointerState.dy\n    const threshold = e.pointerType === 'mouse' ? mouseThreshold : touchThreshold\n\n    if (pointerState.edges.length) {\n      transformSelection({ pointerState, x, y, threshold })\n    } else if (stateRef.current.pointers.size === 1) {\n      moveSelection({ dx: e.movementX, dy: e.movementY })\n    }\n    \n    updateSelection();\n  }\n\n  function handleDragEnd(e) {\n    if (!stateRef.current.pointers.has(e.pointerId)) return // Drag already ended, multiple events can end dragging\n\n    const { edges } = stateRef.current.pointers.get(e.pointerId)\n    stateRef.current.edges = stateRef.current.edges.filter(x => !edges.includes(x))\n    stateRef.current.pointers.delete(e.pointerId)\n    stateRef.current.dragging = false\n  }\n\n  function getPointerState({ x, y, threshold }) {\n    const edges = [];\n    const dl = x - cropZoneRef.current.left;\n    const dr = x - cropZoneRef.current.right;\n    const dt = y - cropZoneRef.current.top;\n    const db = y - cropZoneRef.current.bottom;\n    const adl = Math.abs(dl);\n    const adr = Math.abs(dr);\n    const adt = Math.abs(dt);\n    const adb = Math.abs(db);\n\n    if (adl <= adr && adl < threshold) edges.push(\"left\");\n    else if (adr <= adl && adr < threshold) edges.push(\"right\");\n    if (adt <= adb && adt < threshold) edges.push(\"top\");\n    else if (adb <= adt && adb < threshold) edges.push(\"bottom\");\n\n    return { \n      dx: edges.includes('left') ? dl : edges.includes('right') ? dr : 0, \n      dy: edges.includes('top') ? dt : edges.includes('bottom') ? db : 0, \n      edges: edges.filter(x => !stateRef.current.edges.includes(x))\n    };\n  }\n\n  function transformSelection({ pointerState, x, y, threshold }) {\n    if (pointerState.edges.includes(\"left\")) {\n      cropZoneRef.current.left = x;\n      cropZoneRef.current.right = Math.max(cropZoneRef.current.right, x + threshold);\n    } else if (pointerState.edges.includes(\"right\")) {\n      cropZoneRef.current.right = x;\n      cropZoneRef.current.left = Math.min(cropZoneRef.current.left, x - threshold);\n    }\n\n    if (pointerState.edges.includes(\"top\")) {\n      cropZoneRef.current.top = y;\n      cropZoneRef.current.bottom = Math.max(cropZoneRef.current.bottom, y + threshold);\n    } else if (pointerState.edges.includes(\"bottom\")) {\n      cropZoneRef.current.bottom = y;\n      cropZoneRef.current.top = Math.min(cropZoneRef.current.top, y - threshold);\n    }\n  }\n\n  function moveSelection({ dx, dy }) {\n    const clampedDx = clamp(-cropZoneRef.current.left, cropZoneRef.current.containerWidth - cropZoneRef.current.right, dx)\n    const clampedDy = clamp(-cropZoneRef.current.top, cropZoneRef.current.containerHeight - cropZoneRef.current.bottom, dy)\n    cropZoneRef.current.left += clampedDx\n    cropZoneRef.current.right += clampedDx\n    cropZoneRef.current.top += clampedDy\n    cropZoneRef.current.bottom += clampedDy\n  }\n\n  function updateSelection() {\n    cancelAnimationFrame(frameRef.current);\n    frameRef.current = requestAnimationFrame(() => {\n      Object.assign(selectionRef.current.style, {\n        position: \"absolute\",\n        left: px(cropZoneRef.current.left),\n        top: px(cropZoneRef.current.top),\n        width: px(cropZoneRef.current.right - cropZoneRef.current.left),\n        height: px(cropZoneRef.current.bottom - cropZoneRef.current.top),\n      });\n    });\n  }\n}\n\nfunction px(n) {\n  return n + \"px\";\n}\n\nfunction clamp(left, right, value) {\n  const [min, max] = left < right ? [left, right] : [right, left]\n  return Math.max(min, Math.min(max, value))\n}\n\nfunction cx(...classes) {\n  return classes.filter(Boolean).join(' ')\n}\n",".component {\n  position: relative;\n}\n\n.selection > * {\n  width: 100%;\n  height: 100%;\n}\n"],"names":[],"version":3,"file":"module.js.map"}